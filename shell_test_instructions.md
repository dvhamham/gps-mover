# Shell Command System Test Instructions

## ูุดุงูู ุงููุธุงู ุงูุณุงุจูุฉ ุงูุชู ุชู ุฅุตูุงุญูุง:
1. **ุงูุชุนููู ูู ุงููุฒุงููุฉ**: ูุงู ุงููุธุงู ูุณุชุฎุฏู MainLooper ููุง ูุณุจุจ ุชุนููู
2. **ุนุฏู ูุฌูุฏ timeout**: ูู ููู ููุงู ุญูุงูุฉ ูู ุงูุชุนููู ุงูุฏุงุฆู
3. **ุนุฏู ุฅุนุงุฏุฉ ุชุนููู ุงูุญุงูุฉ**: ูู ุชูู ููุงู ุขููุฉ ูุฅุนุงุฏุฉ ุชุนููู ุงููุธุงู ูู ุญุงูุฉ ุงูุชุนููู
4. **ูุดุงูู ุงููุฒุงููุฉ**: ูุงูุช ุชุญุฏุซ ูุดุงูู ุจูู real-time listener ูุงูุชูููุฐ

## ุงูุชุญุณููุงุช ุงููุทุจูุฉ:

### 1. ุชุญููู ุฅูู Background Thread
- **ูุจู**: ุงุณุชุฎุฏุงู Handler ูุน MainLooper
- **ุจุนุฏ**: ุงุณุชุฎุฏุงู Thread ูููุตู ูููุน ุชุนููู ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ

### 2. ุฅุถุงูุฉ Timeout System
- **ุฒูู ุงูุชูููุฐ ุงูุฅุฌูุงูู**: 60 ุซุงููุฉ ูุญุฏ ุฃูุตู
- **ุฒูู ุชูููุฐ ุงูุฃูุฑ ุงููุงุญุฏ**: 10 ุซูุงูู
- **ูุฑุงูุจุฉ ุงูุญุงูุฉ**: 2 ุฏูููุฉ ูููุดู ุนู ุงูุชุนููู

### 3. ุขููุฉ ุฅุนุงุฏุฉ ุงูุชุนููู
- **ูุดู ุงูุชุนููู**: ูุธุงู ูููุดู ุนู ุงูุชุนููู ุงูุชููุงุฆู
- **ุฅุนุงุฏุฉ ุชุนููู ูุณุฑูุฉ**: ุฏุงูุฉ `forceResetExecutionState()`
- **ุชูุธูู ุงูููุงุฑุฏ**: ุชูุธูู ุชููุงุฆู ููู threads

### 4. ุชุญุณูู ุงููุฒุงููุฉ
- **ุญูุงูุฉ ูู ุงูุชูููุฐ ุงููุชุฒุงูู**: ููุน ุชุดุบูู ุนุฏุฉ ุฃูุงูุฑ ูู ููุณ ุงูููุช
- **ูุฑุงูุจุฉ ุญุงูุฉ ุงูู Thread**: ุชุชุจุน ุญุงูุฉ ุชูููุฐ ุงูุฃูุงูุฑ
- **ูุนุงูุฌุฉ ุงูุงููุทุงุน**: ุฏุนู ูุฅููุงู ุงูุชูููุฐ ุจุดูู ุขูู

## ููููุฉ ุงูุงุฎุชุจุงุฑ:

### 1. ุงูุงุฎุชุจุงุฑ ุงูุฃุณุงุณู:
```kotlin
// ูู MainActivity ุฃู ุฃู Activity
CollectionsManager.testShellCommandExecution(this)

// ุณุชููู ุงูุฏุงูุฉ ุจุฅุนุฏุงุฏ:
// - Command: echo 'Test execution #$RANDOM'
// - Count: 3
// - Wait: 2 seconds
// - ูุชููุน: 3 ุชูููุฐุงุช ูุน ุงูุชุธุงุฑ ุซุงููุชูู ุจูู ูู ุชูููุฐ
```

### 2. ูุญุต ุญุงูุฉ ุงูุชูููุฐ:
```kotlin
val status = CollectionsManager.checkExecutionStatus()
Log.i("TEST", status)
```

### 3. ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุงูุชุนููู:
```kotlin
// ูู ุญุงูุฉ ุงูุชุนููู
val androidId = Settings.Secure.getString(contentResolver, Settings.Secure.ANDROID_ID)
CollectionsManager.forceResetExecutionState(androidId)
```

### 4. ุงูุงุฎุชุจุงุฑ ุงููุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
1. ุงุฐูุจ ุฅูู Firebase Console
2. ูู ูุฌููุนุฉ `devices`
3. ุงุฎุชุฑ ุฌูุงุฒู
4. ุนุฏู `shell` object:
   ```json
   {
     "command": "echo 'Test command execution'",
     "run": true,
     "count": 5,
     "wait": 3,
     "result": ""
   }
   ```
5. ุงุญูุธ ุงูุชุนุฏูู ูุฑุงูุจ ุงูุชูููุฐ

## ุงูุณุฌูุงุช ุงููุชููุนุฉ:

### ุชูููุฐ ุทุจูุนู:
```
๐ Real-time shell command detected - Command: 'echo Test', Count: 3, Wait: 2s
๐ Starting command execution sequence - keeping run flag true during execution
๐ฏ Starting internal command sequence - Total executions planned: 3, Wait between: 2s
๐ Starting command execution in background thread
โก Executing shell command (1/3): echo Test
โ Shell command executed successfully (1/3)
โฐ Waiting 2 seconds before next execution...
โฑ๏ธ Wait completed, proceeding to next execution...
โก Executing shell command (2/3): echo Test
โ Shell command executed successfully (2/3)
โฐ Waiting 2 seconds before next execution...
โฑ๏ธ Wait completed, proceeding to next execution...
โก Executing shell command (3/3): echo Test
โ Shell command executed successfully (3/3)
๐ Shell command sequence completed - Total executions: 3/3
โ Shell run flag disabled and result updated after command sequence completion
๐ Execution flag reset - ready for next command
```

### ูุดู ุงูุชุนููู:
```
โ๏ธ Execution timeout detected! Forcing reset after 120s
๐ Execution state reset due to timeout - ready for new commands
```

## ูุคุดุฑุงุช ุงููุฌุงุญ:

### โ ูุฌุจ ุฃู ุชุญุฏุซ:
1. **ุชูููุฐ ุฌููุน ุงูุชูุฑุงุฑุงุช**: ูุฌุจ ุฃู ูููุฐ 5 ูุฑุงุช ุฅุฐุง ูุงู count=5
2. **ุงูุชุธุงุฑ ุจูู ุงูุชูุฑุงุฑุงุช**: ูุฌุจ ุฃู ููุชุธุฑ 3 ุซูุงู ุฅุฐุง ูุงู wait=3
3. **ุชุนุทูู run flag**: ูุฌุจ ุฃู ูุตุจุญ run=false ุจุนุฏ ุงูุชูุงุก ุฌููุน ุงูุชูุฑุงุฑุงุช
4. **ุนุฏู ุงูุชุนููู**: ูุง ูุฌุจ ุฃู ูุจูู ุงููุธุงู ูุนููุง ุฃูุซุฑ ูู timeout ุงููุญุฏุฏ

### โ ูุฌุจ ุฃูุง ุชุญุฏุซ:
1. **ุชูููุฐ ูุฑุฉ ูุงุญุฏุฉ ููุท**: ุฅุฐุง ูุงู count > 1
2. **ุจูุงุก run=true**: ุจุนุฏ ุงูุชูุงุก ุงูุชูููุฐ
3. **ุชุนููู ุงููุธุงู**: ูุฃูุซุฑ ูู timeout ุงููุญุฏุฏ
4. **ุนุฏู ุงุณุชุฌุงุจุฉ**: ููุฃูุงูุฑ ุงูุฌุฏูุฏุฉ ุจุนุฏ ุงูุชูุงุก ุงูุชูููุฐ

## ุงุฎุชุจุงุฑ ุดุงูู:

### ุงููุฑุญูุฉ 1: ุงุฎุชุจุงุฑ ุงูุชูุฑุงุฑ
```
Count: 5, Wait: 2
ุงููุชููุน: 5 ุชูููุฐุงุช ูุน ุงูุชุธุงุฑ ุซุงููุชูู ุจูู ูู ุชูููุฐ
```

### ุงููุฑุญูุฉ 2: ุงุฎุชุจุงุฑ ุงูุงูุชุธุงุฑ
```
Count: 3, Wait: 5
ุงููุชููุน: 3 ุชูููุฐุงุช ูุน ุงูุชุธุงุฑ 5 ุซูุงู ุจูู ูู ุชูููุฐ
```

### ุงููุฑุญูุฉ 3: ุงุฎุชุจุงุฑ ุนุฏู ุงูุงูุชุธุงุฑ
```
Count: 4, Wait: 0
ุงููุชููุน: 4 ุชูููุฐุงุช ููุฑูุฉ ุจุฏูู ุงูุชุธุงุฑ
```

### ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑ ุงูุชุนุงูู ูู ุงูุฎุทุฃ
```
Count: 3, Wait: 2
Command: "invalid_command_that_will_fail"
ุงููุชููุน: 3 ุชูููุฐุงุช ูุน errors ูููู ูุณุชูุฑ ุญุชู ุงูููุงูุฉ
```

## ููุงุญุธุงุช ูููุฉ:
1. **Root Access**: ุชุฃูุฏ ูู ูุฌูุฏ root access ูุจู ุงูุงุฎุชุจุงุฑ
2. **ุงููุฑุงูุจุฉ**: ุฑุงูุจ ุงูุณุฌูุงุช ุจุนูุงูุฉ ูุชุชุจุน ุงูุชูููุฐ
3. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ุชุญูู ูู run flag ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุงูุฒูู**: ุงุญุณุจ ุงูุฒูู ุงูุฅุฌูุงูู ููุชูููุฐ ููุชุฃูุฏ ูู ุตุญุฉ ุงูุงูุชุธุงุฑ
